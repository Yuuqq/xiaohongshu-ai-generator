<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="基于Google Gemini API的智能小红书图片生成器，支持多种模板风格，一键生成高质量内容图片">
    <meta name="keywords" content="小红书,AI图片生成,Gemini API,内容创作,社交媒体">
    <meta name="author" content="AI Assistant">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="小红书AI图片生成器">
    <meta property="og:description" content="智能生成小红书风格图片，提升内容创作效率">
    <meta property="og:type" content="website">
    
    <title>小红书AI图片生成器 | 智能内容创作工具</title>
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🎨</text></svg>">
    
    <!-- Local Material Icons (avoid blocked Google Fonts domains in mainland networks) -->
    <link rel="stylesheet" href="assets/vendor/material-icons/material-icons.css">
    
    <!-- Styles -->
    <link rel="stylesheet" href="assets/css/styles.css?v=20260225_1">
</head>
<body>
    <!-- App Container -->
    <div id="app" class="app-container">
        
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="logo-section">
                    <span class="logo-icon">🎨</span>
                    <h1 class="app-title">小红书AI图片生成器</h1>
                </div>
                <div class="header-actions">
                    <button id="premiumTestBtn" class="icon-button" title="精美卡片测试" onclick="openPremiumTest()">
                        <span class="material-icons">auto_awesome</span>
                    </button>
                    <button id="debugBtn" class="icon-button" title="调试" onclick="openDebugInfo()">
                        <span class="material-icons">bug_report</span>
                    </button>
                    <button id="settingsBtn" class="icon-button" title="设置">
                        <span class="material-icons">settings</span>
                    </button>
                    <button id="helpBtn" class="icon-button" title="帮助">
                        <span class="material-icons">help_outline</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">

            <!-- Progress Steps -->
            <section class="progress-steps">
                <div class="step active" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-label">内容输入</div>
                </div>
                <div class="step" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-label">风格选择</div>
                </div>
                <div class="step" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-label">内容优化</div>
                </div>
                <div class="step" data-step="4">
                    <div class="step-number">4</div>
                    <div class="step-label">预览生成</div>
                </div>
                <div class="step" data-step="5">
                    <div class="step-number">5</div>
                    <div class="step-label">图片导出</div>
                </div>
            </section>

            <!-- Step 1: Input Section -->
            <section class="input-section card step-content" data-step="1">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="material-icons">edit</span>
                        步骤1：内容输入
                    </h2>
                    <div class="step-status">
                        <span class="status-indicator" id="inputStatus">待输入</span>
                    </div>
                </div>

                <div class="input-group">
                    <label for="contentInput" class="input-label">输入您要生成图片的文字内容</label>
                    <textarea
                        id="contentInput"
                        class="content-textarea"
                        placeholder="例如：分享一个超好用的护肤小技巧，让你的皮肤水嫩透亮..."
                        rows="4"
                        maxlength="1000"
                    ></textarea>
                    <div class="input-footer">
                        <div class="input-stats">
                            <span class="char-counter">0/1000</span>
                            <span class="word-counter">0 词</span>
                            <span class="validation-status" id="validationStatus"></span>
                        </div>
                        <div class="input-actions">
                            <button id="clearBtn" class="text-button">
                                <span class="material-icons">clear</span>
                                清空
                            </button>
                            <button id="nextStep1" class="primary-button" disabled>
                                <span class="material-icons">arrow_forward</span>
                                下一步
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Real-time Preview -->
                <div class="preview-panel">
                    <h3 class="preview-title">实时预览</h3>
                    <div class="content-preview" id="contentPreview">
                        <div class="preview-placeholder">请输入内容以查看预览</div>
                    </div>
                </div>
            </section>

            <!-- Step 2: Style Selection -->
            <section class="style-section card step-content" data-step="2" style="display: none;">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="material-icons">palette</span>
                        步骤2：风格选择
                    </h2>
                    <div class="step-status">
                        <span class="status-indicator" id="styleStatus">待选择</span>
                    </div>
                </div>

                <!-- Tone Selection -->
                <div class="tone-selection">
                    <h3 class="subsection-title">选择写作口吻</h3>
                    <div class="tone-grid" id="toneGrid">
                        <div class="tone-card" data-tone="friendly">
                            <div class="tone-icon">😊</div>
                            <div class="tone-name">亲切友好</div>
                            <div class="tone-desc">温暖亲和，拉近距离</div>
                        </div>
                        <div class="tone-card" data-tone="professional">
                            <div class="tone-icon">💼</div>
                            <div class="tone-name">专业权威</div>
                            <div class="tone-desc">严谨专业，值得信赖</div>
                        </div>
                        <div class="tone-card" data-tone="playful">
                            <div class="tone-icon">🎉</div>
                            <div class="tone-name">活泼可爱</div>
                            <div class="tone-desc">轻松有趣，充满活力</div>
                        </div>
                        <div class="tone-card" data-tone="concise">
                            <div class="tone-icon">⚡</div>
                            <div class="tone-name">简洁干练</div>
                            <div class="tone-desc">言简意赅，直击要点</div>
                        </div>
                        <div class="tone-card" data-tone="elegant">
                            <div class="tone-icon">✨</div>
                            <div class="tone-name">优雅文艺</div>
                            <div class="tone-desc">文艺范儿，有格调</div>
                        </div>
                        <div class="tone-card" data-tone="trendy">
                            <div class="tone-icon">🔥</div>
                            <div class="tone-name">潮流时尚</div>
                            <div class="tone-desc">紧跟潮流，年轻态</div>
                        </div>
                    </div>
                </div>

                <!-- Template Selection -->
                <div class="template-selection">
                    <h3 class="subsection-title">选择视觉模板</h3>
                    <div class="template-grid" id="templateGrid">
                        <!-- Templates will be loaded dynamically -->
                    </div>
                </div>

                <!-- Custom Tags -->
                <div class="custom-tags">
                    <h3 class="subsection-title">自定义标签</h3>
                    <div class="tags-input-group">
                        <input type="text" id="customTagInput" class="tag-input" placeholder="输入自定义标签，按回车添加">
                        <button id="addTagBtn" class="add-tag-btn">
                            <span class="material-icons">add</span>
                        </button>
                    </div>
                    <div class="tags-container" id="tagsContainer">
                        <!-- Custom tags will appear here -->
                    </div>
                    <div class="suggested-tags">
                        <span class="suggested-label">建议标签：</span>
                        <button class="suggested-tag" data-tag="干货分享">干货分享</button>
                        <button class="suggested-tag" data-tag="实用技巧">实用技巧</button>
                        <button class="suggested-tag" data-tag="生活美学">生活美学</button>
                        <button class="suggested-tag" data-tag="种草推荐">种草推荐</button>
                        <button class="suggested-tag" data-tag="新手友好">新手友好</button>
                    </div>
                </div>

                <!-- Step Navigation -->
                <div class="step-navigation">
                    <button id="prevStep2" class="secondary-button">
                        <span class="material-icons">arrow_back</span>
                        上一步
                    </button>
                    <button id="nextStep2" class="primary-button" disabled>
                        <span class="material-icons">arrow_forward</span>
                        下一步
                    </button>
                </div>
            </section>

            <!-- Step 3: Content Optimization -->
            <section class="optimization-section card step-content" data-step="3" style="display: none;">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="material-icons">auto_awesome</span>
                        步骤3：内容优化
                    </h2>
                    <div class="step-status">
                        <span class="status-indicator" id="optimizationStatus">待优化</span>
                    </div>
                </div>

                <!-- Original Content Display -->
                <div class="content-comparison">
                    <div class="original-content">
                        <h3 class="content-title">原始内容</h3>
                        <div class="content-display" id="originalContent"></div>
                    </div>

                    <!-- Optimization Controls -->
                    <div class="optimization-controls">
                        <button id="optimizeBtn" class="primary-button">
                            <span class="material-icons">psychology</span>
                            AI智能优化
                        </button>
                        <div class="optimization-options">
                            <label class="checkbox-label">
                                <input type="checkbox" id="enhanceReadability" checked>
                                <span class="checkmark"></span>
                                提升可读性
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="addEmojis" checked>
                                <span class="checkmark"></span>
                                添加表情符号
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="optimizeStructure" checked>
                                <span class="checkmark"></span>
                                优化结构
                            </label>
                        </div>
                    </div>

                    <!-- Optimized Content Display -->
                    <div class="optimized-content">
                        <h3 class="content-title">优化后内容</h3>
                        <div class="content-display" id="optimizedContent">
                            <div class="optimization-placeholder">点击"AI智能优化"按钮开始优化</div>
                        </div>
                        <div class="content-actions" style="display: none;">
                            <button id="editOptimizedBtn" class="text-button">
                                <span class="material-icons">edit</span>
                                编辑
                            </button>
                            <button id="regenerateBtn" class="text-button">
                                <span class="material-icons">refresh</span>
                                重新生成
                            </button>
                            <button id="acceptOptimizedBtn" class="primary-button">
                                <span class="material-icons">check</span>
                                使用此版本
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Step Navigation -->
                <div class="step-navigation">
                    <button id="prevStep3" class="secondary-button">
                        <span class="material-icons">arrow_back</span>
                        上一步
                    </button>
                    <button id="nextStep3" class="primary-button" disabled>
                        <span class="material-icons">arrow_forward</span>
                        下一步
                    </button>
                </div>
            </section>

            <!-- Step 4: Preview Generation -->
            <section class="preview-section card step-content" data-step="4" style="display: none;">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="material-icons">preview</span>
                        步骤4：预览生成
                    </h2>
                    <div class="step-status">
                        <span class="status-indicator" id="previewStatus">待生成</span>
                    </div>
                </div>

                <!-- Content Analysis -->
                <div class="content-analysis" id="contentAnalysis" style="display: none;">
                    <h3 class="analysis-title">
                        <span class="material-icons">analytics</span>
                        智能内容分析
                    </h3>
                    <div class="analysis-result" id="analysisResult">
                        <!-- Analysis results will appear here -->
                    </div>
                    <div class="analysis-actions">
                        <button id="useAnalysisBtn" class="primary-button">
                            <span class="material-icons">auto_awesome</span>
                            使用智能分段
                        </button>
                        <button id="manualSettingsBtn" class="secondary-button">
                            <span class="material-icons">tune</span>
                            手动设置
                        </button>
                    </div>
                </div>

                <!-- Generation Settings -->
                <div class="generation-settings" id="generationSettings">
                    <div class="settings-grid">
                        <div class="control-group">
                            <label for="imageCount" class="control-label">生成数量</label>
                            <select id="imageCount" class="select-input">
                                <option value="1">1张图片</option>
                                <option value="2">2张图片</option>
                                <option value="3" selected>3张图片</option>
                                <option value="5">5张图片</option>
                            </select>
                        </div>

                        <div class="control-group">
                            <label for="imageStyle" class="control-label">图片风格</label>
                            <select id="imageStyle" class="select-input">
                                <option value="realistic">写实风格</option>
                                <option value="illustration" selected>插画风格</option>
                                <option value="minimalist">极简风格</option>
                                <option value="artistic">艺术风格</option>
                            </select>
                        </div>

                        <div class="control-group">
                            <label for="aspectRatio" class="control-label">画面比例</label>
                            <select id="aspectRatio" class="select-input">
                                <option value="9:16" selected>9:16 (竖版)</option>
                                <option value="1:1">1:1 (方形)</option>
                                <option value="16:9">16:9 (横版)</option>
                                <option value="4:5">4:5 (小红书)</option>
                            </select>
                        </div>

                        <div class="control-group">
                            <label for="quality" class="control-label">图片质量</label>
                            <select id="quality" class="select-input">
                                <option value="standard">标准质量</option>
                                <option value="high" selected>高质量</option>
                                <option value="ultra">超高质量</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Live Preview -->
                <div class="live-preview">
                    <h3 class="preview-title">实时预览</h3>
                    <div class="preview-container">
                        <div class="preview-card" id="livePreviewCard">
                            <div class="preview-placeholder">点击生成预览查看效果</div>
                        </div>
                        <div class="preview-controls">
                            <button id="generatePreviewBtn" class="secondary-button">
                                <span class="material-icons">visibility</span>
                                生成预览
                            </button>
                            <button id="generateAllBtn" class="primary-button">
                                <span class="material-icons">auto_awesome</span>
                                批量生成
                            </button>
                            <button id="refreshPreviewBtn" class="secondary-button" style="display: none;">
                                <span class="material-icons">refresh</span>
                                刷新预览
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Generated Images Grid -->
                <div class="generated-images-preview" id="generatedImagesPreview" style="display: none;">
                    <h3 class="preview-title">生成的图片</h3>
                    <div class="images-grid" id="previewImagesGrid">
                        <!-- Generated images will appear here -->
                    </div>
                    <div class="generation-summary">
                        <div class="summary-stats">
                            <span class="stat-item">
                                <span class="stat-number" id="previewImageCount">0</span>
                                <span class="stat-label">张图片</span>
                            </span>
                            <span class="stat-item">
                                <span class="stat-number" id="previewGenerationTime">0s</span>
                                <span class="stat-label">生成时间</span>
                            </span>
                        </div>
                    </div>
                </div>

                <!-- Step Navigation -->
                <div class="step-navigation">
                    <button id="prevStep4" class="secondary-button">
                        <span class="material-icons">arrow_back</span>
                        上一步
                    </button>
                    <button id="nextStep4" class="primary-button" disabled>
                        <span class="material-icons">arrow_forward</span>
                        下一步
                    </button>
                </div>
            </section>

            <!-- Step 5: Export Images -->
            <section class="export-section card step-content" data-step="5" style="display: none;">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="material-icons">file_download</span>
                        步骤5：图片导出
                    </h2>
                    <div class="step-status">
                        <span class="status-indicator" id="exportStatus">待导出</span>
                    </div>
                </div>

                <!-- Generation Summary -->
                <div class="generation-summary">
                    <div class="summary-stats">
                        <div class="stat-item">
                            <span class="stat-number" id="totalImages">0</span>
                            <span class="stat-label">张图片</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="totalSize">0 MB</span>
                            <span class="stat-label">总大小</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="generationTime">0s</span>
                            <span class="stat-label">生成时间</span>
                        </div>
                    </div>
                </div>

                <!-- Export Options -->
                <div class="export-options">
                    <h3 class="subsection-title">导出选项</h3>
                    <div class="export-settings">
                        <div class="setting-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="addWatermark" checked>
                                <span class="checkmark"></span>
                                添加水印
                            </label>
                        </div>
                        <div class="setting-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="compressImages">
                                <span class="checkmark"></span>
                                压缩图片
                            </label>
                        </div>
                        <div class="setting-group">
                            <label for="exportFormat" class="setting-label">导出格式</label>
                            <select id="exportFormat" class="select-input">
                                <option value="png" selected>PNG (高质量)</option>
                                <option value="jpg">JPG (小文件)</option>
                                <option value="webp">WebP (最优)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Generated Images Grid -->
                <div class="generated-images">
                    <h3 class="subsection-title">生成的图片</h3>
                    <div class="images-grid" id="imagesGrid">
                        <!-- Generated images will appear here -->
                    </div>
                </div>

                <!-- Export Actions -->
                <div class="export-actions">
                    <button id="downloadAllBtn" class="primary-button">
                        <span class="material-icons">download</span>
                        下载全部图片
                    </button>
                    <button id="shareBtn" class="secondary-button">
                        <span class="material-icons">share</span>
                        分享
                    </button>
                    <button id="regenerateAllBtn" class="secondary-button">
                        <span class="material-icons">refresh</span>
                        重新生成
                    </button>
                </div>

                <!-- Step Navigation -->
                <div class="step-navigation">
                    <button id="prevStep5" class="secondary-button">
                        <span class="material-icons">arrow_back</span>
                        上一步
                    </button>
                    <button id="startOverBtn" class="primary-button">
                        <span class="material-icons">restart_alt</span>
                        重新开始
                    </button>
                </div>
            </section>

        </main>

        <!-- Loading Overlay -->
        <div id="loadingOverlay" class="loading-overlay" style="display: none;">
            <div class="loading-content">
                <div class="loading-spinner"></div>
                <h3 class="loading-title">AI正在创作中...</h3>
                <p class="loading-text">请稍候，这可能需要几分钟时间</p>
                <div class="loading-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <span class="progress-text" id="progressText">0%</span>
                </div>
            </div>
        </div>

        <!-- Settings Modal -->
        <div id="settingsModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">设置</h3>
                    <button class="close-button" id="closeSettings">
                        <span class="material-icons">close</span>
                    </button>
                </div>
                <form id="settingsForm" autocomplete="on" onsubmit="return false;">
                    <div class="modal-body">
                        <div class="setting-group">
                            <label for="apiKeyInput" class="setting-label">Google Gemini API密钥</label>
                            <input
                                type="password"
                                id="apiKeyInput"
                                name="apiKey"
                                class="setting-input"
                                placeholder="输入您的API密钥"
                                autocomplete="off"
                            >
                            <p class="setting-help">
                                <span class="material-icons">info</span>
                                请在Google AI Studio获取您的API密钥
                            </p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button id="saveSettings" type="button" class="primary-button">保存设置</button>
                    </div>
                </form>
            </div>
        </div>

    </div>

        <!-- Help Modal -->
        <div id="helpModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">使用帮助</h3>
                    <button class="close-button" id="closeHelp">
                        <span class="material-icons">close</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="help-section">
                        <h4>🚀 快速开始</h4>
                        <ol>
                            <li>在设置中输入您的Google Gemini API密钥</li>
                            <li>在内容输入区域输入要生成图片的文字</li>
                            <li>选择合适的模板风格</li>
                            <li>点击"开始生成"按钮</li>
                            <li>等待AI生成完成，预览并下载图片</li>
                        </ol>
                    </div>

                    <div class="help-section">
                        <h4>💡 使用技巧</h4>
                        <ul>
                            <li>文字内容越具体，生成效果越好</li>
                            <li>可以包含表情符号和特殊符号</li>
                            <li>建议文字长度在50-500字之间</li>
                            <li>选择合适的模板能提升视觉效果</li>
                        </ul>
                    </div>

                    <div class="help-section">
                        <h4>🔑 API密钥获取</h4>
                        <p>访问 <a href="https://makersuite.google.com/app/apikey" target="_blank">Google AI Studio</a> 获取免费的API密钥。</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Toast Notifications -->
        <div id="toastContainer" class="toast-container"></div>

        <!-- Footer -->
        <footer class="app-footer">
            <div class="footer-content">
                <p class="footer-text">
                    基于 <strong>Google Gemini API</strong> 构建 |
                    <a href="https://github.com" target="_blank">开源项目</a> |
                    <span class="version">v1.0.0</span>
                </p>
            </div>
        </footer>

    </div>

    <!-- Scripts -->
    <script src="assets/js/utils.js?v=20260223"></script>
    <script src="assets/js/content-analyzer.js?v=20260225_3"></script>
    <script src="assets/js/advanced-image-generator.js?v=20260223"></script>
    <script src="assets/js/prompt-engine.js?v=20260223"></script>
    <script src="assets/js/premium-prompt-engine.js?v=20260223"></script>
    <script src="assets/js/premium-card-generator.js?v=20260223"></script>
    <script src="assets/js/templates.js?v=20260223"></script>
    <script src="assets/js/content-optimizer.js?v=20260225_1"></script>
    <script src="assets/js/visual-generator.js?v=20260225_7"></script>
    <script src="assets/js/preview-system.js?v=20260225_2"></script>
    <script src="assets/js/performance-optimizer.js?v=20260223"></script>
    <script src="assets/js/ui.js?v=20260223"></script>
    <script src="assets/js/generator.js?v=20260225_3"></script>
    <script src="assets/js/app.js?v=20260223"></script>
</body>
</html>
