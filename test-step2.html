<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ­¥éª¤2æµ‹è¯• - å°çº¢ä¹¦AIå›¾ç‰‡ç”Ÿæˆå™¨</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .test-section h3 {
            margin-top: 0;
            color: #6750A4;
        }
        .tone-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 16px;
            margin: 15px 0;
        }
        .tone-card {
            background-color: white;
            border: 2px solid #ddd;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        .tone-card:hover {
            border-color: #6750A4;
            transform: translateY(-2px);
        }
        .tone-card.selected {
            border-color: #6750A4;
            background-color: #f3f0ff;
        }
        .tone-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }
        .tone-name {
            font-weight: 500;
            margin-bottom: 4px;
        }
        .tone-desc {
            font-size: 12px;
            color: #666;
        }
        .template-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin: 15px 0;
        }
        .template-card {
            background-color: white;
            border: 2px solid #ddd;
            border-radius: 12px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .template-card:hover {
            border-color: #6750A4;
            transform: translateY(-2px);
        }
        .template-card.selected {
            border-color: #6750A4;
            background-color: #f3f0ff;
        }
        .template-preview {
            width: 100%;
            height: 80px;
            border-radius: 8px;
            margin-top: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        .status {
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            font-weight: bold;
        }
        .status.success { background: #d4edda; color: #155724; }
        .status.error { background: #f8d7da; color: #721c24; }
        .status.info { background: #d1ecf1; color: #0c5460; }
        button {
            background: #6750A4;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        button:hover:not(:disabled) {
            background: #5a4093;
        }
        .debug-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 14px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª æ­¥éª¤2åŠŸèƒ½æµ‹è¯•</h1>
        
        <div class="test-section">
            <h3>å£å»é€‰æ‹©æµ‹è¯•</h3>
            <div class="tone-grid" id="toneGrid">
                <div class="tone-card" data-tone="friendly">
                    <div class="tone-icon">ğŸ˜Š</div>
                    <div class="tone-name">äº²åˆ‡å‹å¥½</div>
                    <div class="tone-desc">æ¸©æš–äº²å’Œï¼Œæ‹‰è¿‘è·ç¦»</div>
                </div>
                <div class="tone-card" data-tone="professional">
                    <div class="tone-icon">ğŸ’¼</div>
                    <div class="tone-name">ä¸“ä¸šæƒå¨</div>
                    <div class="tone-desc">ä¸¥è°¨ä¸“ä¸šï¼Œå€¼å¾—ä¿¡èµ–</div>
                </div>
                <div class="tone-card" data-tone="playful">
                    <div class="tone-icon">ğŸ‰</div>
                    <div class="tone-name">æ´»æ³¼å¯çˆ±</div>
                    <div class="tone-desc">è½»æ¾æœ‰è¶£ï¼Œå……æ»¡æ´»åŠ›</div>
                </div>
                <div class="tone-card" data-tone="concise">
                    <div class="tone-icon">âš¡</div>
                    <div class="tone-name">ç®€æ´å¹²ç»ƒ</div>
                    <div class="tone-desc">è¨€ç®€æ„èµ…ï¼Œç›´å‡»è¦ç‚¹</div>
                </div>
            </div>
            <div id="toneStatus" class="status info">è¯·é€‰æ‹©ä¸€ä¸ªå£å»</div>
        </div>

        <div class="test-section">
            <h3>æ¨¡æ¿é€‰æ‹©æµ‹è¯•</h3>
            <div class="template-grid" id="templateGrid">
                <!-- æ¨¡æ¿å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
            </div>
            <div id="templateStatus" class="status info">æ­£åœ¨åŠ è½½æ¨¡æ¿...</div>
            <button onclick="loadTemplates()">é‡æ–°åŠ è½½æ¨¡æ¿</button>
        </div>

        <div class="test-section">
            <h3>éªŒè¯ç»“æœ</h3>
            <div id="validationResult" class="status info">è¯·å®Œæˆä¸Šè¿°é€‰æ‹©</div>
            <button id="nextStep" disabled onclick="proceedToNext()">ä¸‹ä¸€æ­¥</button>
        </div>

        <div class="test-section">
            <h3>è°ƒè¯•ä¿¡æ¯</h3>
            <div id="debugInfo" class="debug-info">ç­‰å¾…æ“ä½œ...</div>
            <button onclick="showDebugInfo()">æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯</button>
            <button onclick="clearDebugInfo()">æ¸…ç©ºè°ƒè¯•ä¿¡æ¯</button>
        </div>
    </div>

    <script>
        // æµ‹è¯•çŠ¶æ€
        const testState = {
            tone: '',
            template: null
        };

        // æ¨¡æ¿æ•°æ®
        const templates = [
            {
                id: 'lifestyle',
                name: 'ğŸŒ¸ ç”Ÿæ´»æ–¹å¼',
                description: 'é€‚åˆç”Ÿæ´»åˆ†äº«ã€æ—¥å¸¸è®°å½•',
                preview_gradient: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'
            },
            {
                id: 'knowledge',
                name: 'ğŸ“š çŸ¥è¯†å¹²è´§',
                description: 'é€‚åˆçŸ¥è¯†åˆ†äº«ã€æ•™ç¨‹æ”»ç•¥',
                preview_gradient: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)'
            },
            {
                id: 'fashion',
                name: 'ğŸ‘— æ—¶å°šç©¿æ­',
                description: 'é€‚åˆç©¿æ­åˆ†äº«ã€ç¾å¦†æ•™ç¨‹',
                preview_gradient: 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)'
            },
            {
                id: 'food',
                name: 'ğŸ° ç¾é£Ÿåˆ†äº«',
                description: 'é€‚åˆç¾é£Ÿæ¨èã€èœè°±åˆ†äº«',
                preview_gradient: 'linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)'
            }
        ];

        // åˆå§‹åŒ–
        function init() {
            bindToneEvents();
            loadTemplates();
            updateValidation();
            log('é¡µé¢åˆå§‹åŒ–å®Œæˆ');
        }

        // ç»‘å®šå£å»é€‰æ‹©äº‹ä»¶
        function bindToneEvents() {
            const toneGrid = document.getElementById('toneGrid');
            if (toneGrid) {
                toneGrid.addEventListener('click', (e) => {
                    const toneCard = e.target.closest('.tone-card');
                    if (toneCard) {
                        selectTone(toneCard.dataset.tone);
                    }
                });
                log('å£å»é€‰æ‹©äº‹ä»¶ç»‘å®šæˆåŠŸ');
            } else {
                log('ERROR: å£å»ç½‘æ ¼å…ƒç´ æœªæ‰¾åˆ°');
            }
        }

        // é€‰æ‹©å£å»
        function selectTone(tone) {
            // ç§»é™¤ä¹‹å‰çš„é€‰ä¸­çŠ¶æ€
            document.querySelectorAll('.tone-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // æ·»åŠ æ–°çš„é€‰ä¸­çŠ¶æ€
            document.querySelector(`[data-tone="${tone}"]`).classList.add('selected');
            
            testState.tone = tone;
            updateToneStatus();
            updateValidation();
            log(`é€‰æ‹©å£å»: ${tone}`);
        }

        // åŠ è½½æ¨¡æ¿
        function loadTemplates() {
            const templateGrid = document.getElementById('templateGrid');
            if (!templateGrid) {
                log('ERROR: æ¨¡æ¿ç½‘æ ¼å…ƒç´ æœªæ‰¾åˆ°');
                return;
            }

            templateGrid.innerHTML = '';
            
            templates.forEach(template => {
                const card = document.createElement('div');
                card.className = 'template-card';
                card.dataset.templateId = template.id;
                
                card.innerHTML = `
                    <div class="template-name">${template.name}</div>
                    <div class="template-description">${template.description}</div>
                    <div class="template-preview" style="background: ${template.preview_gradient}">
                        ${template.name}
                    </div>
                `;
                
                card.addEventListener('click', () => selectTemplate(template.id));
                templateGrid.appendChild(card);
            });

            updateTemplateStatus();
            log(`åŠ è½½äº† ${templates.length} ä¸ªæ¨¡æ¿`);
        }

        // é€‰æ‹©æ¨¡æ¿
        function selectTemplate(templateId) {
            // ç§»é™¤ä¹‹å‰çš„é€‰ä¸­çŠ¶æ€
            document.querySelectorAll('.template-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // æ·»åŠ æ–°çš„é€‰ä¸­çŠ¶æ€
            document.querySelector(`[data-template-id="${templateId}"]`).classList.add('selected');
            
            testState.template = templates.find(t => t.id === templateId);
            updateTemplateStatus();
            updateValidation();
            log(`é€‰æ‹©æ¨¡æ¿: ${testState.template.name}`);
        }

        // æ›´æ–°å£å»çŠ¶æ€
        function updateToneStatus() {
            const status = document.getElementById('toneStatus');
            if (testState.tone) {
                status.className = 'status success';
                status.textContent = `âœ“ å·²é€‰æ‹©å£å»: ${testState.tone}`;
            } else {
                status.className = 'status info';
                status.textContent = 'è¯·é€‰æ‹©ä¸€ä¸ªå£å»';
            }
        }

        // æ›´æ–°æ¨¡æ¿çŠ¶æ€
        function updateTemplateStatus() {
            const status = document.getElementById('templateStatus');
            if (testState.template) {
                status.className = 'status success';
                status.textContent = `âœ“ å·²é€‰æ‹©æ¨¡æ¿: ${testState.template.name}`;
            } else {
                status.className = 'status info';
                status.textContent = 'è¯·é€‰æ‹©ä¸€ä¸ªæ¨¡æ¿';
            }
        }

        // æ›´æ–°éªŒè¯ç»“æœ
        function updateValidation() {
            const result = document.getElementById('validationResult');
            const nextBtn = document.getElementById('nextStep');
            
            const isValid = testState.tone && testState.template;
            
            if (isValid) {
                result.className = 'status success';
                result.textContent = 'âœ“ æ‰€æœ‰é€‰æ‹©å·²å®Œæˆï¼Œå¯ä»¥è¿›å…¥ä¸‹ä¸€æ­¥';
                nextBtn.disabled = false;
            } else {
                result.className = 'status error';
                const missing = [];
                if (!testState.tone) missing.push('å£å»');
                if (!testState.template) missing.push('æ¨¡æ¿');
                result.textContent = `âœ— è¿˜éœ€è¦é€‰æ‹©: ${missing.join('ã€')}`;
                nextBtn.disabled = true;
            }
        }

        // è¿›å…¥ä¸‹ä¸€æ­¥
        function proceedToNext() {
            if (testState.tone && testState.template) {
                alert(`æˆåŠŸï¼\nå£å»: ${testState.tone}\næ¨¡æ¿: ${testState.template.name}\n\nå¯ä»¥è¿›å…¥ä¸‹ä¸€æ­¥äº†ï¼`);
                log('éªŒè¯é€šè¿‡ï¼Œå¯ä»¥è¿›å…¥ä¸‹ä¸€æ­¥');
            }
        }

        // æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯
        function showDebugInfo() {
            const info = {
                'å½“å‰çŠ¶æ€': testState,
                'å£å»ç½‘æ ¼å…ƒç´ ': !!document.getElementById('toneGrid'),
                'æ¨¡æ¿ç½‘æ ¼å…ƒç´ ': !!document.getElementById('templateGrid'),
                'æ¨¡æ¿æ•°é‡': templates.length,
                'é¡µé¢URL': window.location.href,
                'æ—¶é—´æˆ³': new Date().toLocaleString()
            };
            
            document.getElementById('debugInfo').textContent = JSON.stringify(info, null, 2);
        }

        // æ¸…ç©ºè°ƒè¯•ä¿¡æ¯
        function clearDebugInfo() {
            document.getElementById('debugInfo').textContent = 'è°ƒè¯•ä¿¡æ¯å·²æ¸…ç©º';
        }

        // æ—¥å¿—å‡½æ•°
        function log(message) {
            const timestamp = new Date().toLocaleTimeString();
            console.log(`[${timestamp}] ${message}`);
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('load', init);
    </script>
</body>
</html>
